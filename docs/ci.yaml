# Continuous Integration

## GitHub Workflows

The GitHub Workflows under [`.github/workflows/][workflows] contain jobs that
are started when Pull-Requests are created or updated. Some of the jobs can
build container-images for multiple architectures. Not everyone or all
environmens wants to run the build tests for all platforms. The workflows can
be configured to select platforms that the `docker/setup-buildx-action`
supports.

For this configuration, a new Environment should be created in the GitHub
Settings of the repository. The Environment is expected to be called `ci`, and
a single Secret ('normal' environment variables seem not possible) should be
added:

- `BUILD_PLATFORMS`: `linux/amd64,linux/arm64,linux/arm/v7`

Detailed steps on creating the GitHub Environment and adding a Secret can be
found in [the GitHub Documentation][gh_env_doc].

In case the `BUILD_PLATFORMS` environment variable is not set, the
`docker/setup-buildx-action` action defaults to the single architecture where
the workflow is run (usually `linux/amd64`).

[workflows]: .github/workflows/
[gh_env_doc]: https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment#environment-secrets
